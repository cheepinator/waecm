language: node_js

os:
  - linux
services:
  - docker

node_js:
  - "6.10.1"

sudo: true

before_script:
  - docker build -t waecm-bsp1 .

script:
  - docker run -v $(pwd):/usr/src/app -p 8080:3000 waecm-bsp1 test

after_success:
- if [ "$TRAVIS_BRANCH" == "master" ]; then
  docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD" registry.heroku.com;
  docker tag waecm-bsp1 uber-banking/web;
  docker push uber-banking/web;
  fi
